<div class="container">
  <h3>üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–æ–∑–º—ñ–Ω—É –º–æ–Ω–µ—Ç</h3>

  <form [formGroup]="coinForm" (ngSubmit)="submit()" class="coin-form">
    <mat-form-field appearance="outline">
      <mat-label>–°—É–º–∞</mat-label>
      <input
        matInput
        type="text"
        formControlName="amount"
        maxlength="15"
        placeholder="–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 67)"
      />

      @if (coinForm.get("amount")?.hasError("required")) {
        <mat-error>–¶–µ –ø–æ–ª–µ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–µ</mat-error>
      } @else if (coinForm.get("amount")?.hasError("pattern")) {
        <mat-error>–ú–∞—î –±—É—Ç–∏ —Ü—ñ–ª–µ —á–∏—Å–ª–æ</mat-error>
      } @else if (coinForm.get("amount")?.hasError("min")) {
        <mat-error>–°—É–º–∞ –º–∞—î –±—É—Ç–∏ –±—ñ–ª—å—à–æ—é –∑–∞ –Ω—É–ª—å</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>–ù–æ–º—ñ–Ω–∞–ª–∏ –º–æ–Ω–µ—Ç</mat-label>
      <input
        matInput
        type="text"
        formControlName="denominations"
        placeholder="–ü—Ä–∏–∫–ª–∞–¥: 1,5,10,25"
      />
      @if (coinForm.get("denominations")?.hasError("required")) {
        <mat-error>–¶–µ –ø–æ–ª–µ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–µ</mat-error>
      } @else if (coinForm.get("denominations")?.hasError("pattern")) {
        <mat-error>–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è —É —Ñ–æ—Ä–º–∞—Ç—ñ 1,5,10</mat-error>
      }
    </mat-form-field>

    <div class="button-group">
      <button mat-flat-button type="submit">üßÆ –û–±—á–∏—Å–ª–∏—Ç–∏</button>
      <button
        mat-stroked-button
        type="button"
        (click)="generateRandomExample()"
      >
        üé≤ –í–∏–ø–∞–¥–∫–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥
      </button>
    </div>
  </form>

  @if (result) {
    <div class="result">
      <p class="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</p>

      <ul>
        @for (coin of result.breakdown; track coin) {
          <li>
            {{ coin.count }} –º–æ–Ω–µ—Ç{{ coin.count > 1 ? "–∏" : "–∞" }} √ó
            {{ coin.coin }} = {{ coin.coin * coin.count }}
          </li>
        }
      </ul>

      <p class="total-coins">
        <strong>–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–Ω–µ—Ç:</strong> {{ result.totalCoins }}
      </p>
    </div>
  }
</div>
